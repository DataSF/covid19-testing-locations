<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8' />
  <title>COVID-19 Testing Locations | San Francisco</title>
  <meta name='robots' content='noindex, nofollow'>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <link rel="stylesheet" media="all" href="//fonts.googleapis.com/css?family=Rubik:300,400,500,700">
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css' rel='stylesheet' />

  <!-- Mapbox -->
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js'></script>

  <!-- Geocoder plugin -->
  <script
    src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.min.js'></script>
  <link rel='stylesheet'
    href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.css'
    type='text/css' />

  <!-- Turf.js plugin -->
  <script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>

  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-NLN95H2');</script>
  <!-- End Google Tag Manager -->


  <style>
    body {
      font-family: "Rubik", sans-serif;
      font-size: 17px;
      font-weight: 400;
      line-height: 24px;
      color: #1c3e57;
      -webkit-font-smoothing: antialiased;
    }

    * {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
    }

    .sidebar {
      position: absolute;
      width: 33.3333%;
      height: 100%;
      top: 0;
      left: 0;
      overflow: hidden;
      border-right: 1px solid rgba(0, 0, 0, 0.25);
    }

    .pad2 {
      padding: 20px;
    }

    .map {
      position: absolute;
      left: 33.3333%;
      width: 66.6666%;
      top: 0;
      bottom: 0;
    }

    h1 {
      font-size: 22px;
      margin: 0;
      font-weight: 500;
      line-height: 22px;
      padding-bottom: 5px;
    }

    a {
      color: #4F66EE;
      text-decoration: underline;
    }

    a:hover {
      color: #101010;
    }

    .heading {
      border-bottom: 1px solid #eee;
      min-height: 60px;
      padding: 10px;
      background-color: #A9D6EA;
      color: #1c3e57;
    }

    .heading a {
      color: #212123;
    }

    #listings-container {
      height: calc(100% - 72px);
      overflow: hidden;
    }

    .listings {
      height: calc(100% - 177px);
      overflow: auto;
    }

    .listings .listing-item {
      display: block;
      border-bottom: 1px solid #eee;
      padding: 10px;
      text-decoration: none;
    }

    .listings .listing-item:last-child {
      border-bottom: none;
    }

    .listings .listing-item .title {
      display: block;
      color: #4F66EE;
      font-weight: 700;
    }

    .listings .listing-item .title small {
      font-weight: 400;
    }

    .listings .listing-item.active .title,
    .listings .listing-item .title:hover {
      color: #4F66EE;
    }

    .listings .listing-item.active {
      background-color: #f8f8f8;
    }

    ::-webkit-scrollbar {
      width: 3px;
      height: 3px;
      border-left: 0;
      background: rgba(0, 0, 0, 0.1);
    }

    ::-webkit-scrollbar-track {
      background: none;
    }

    ::-webkit-scrollbar-thumb {
      background: #00853e;
      border-radius: 0;
    }

    .marker {
      border: none;
      cursor: pointer;
      height: 56px;
      width: 56px;
      background-color: rgba(0, 0, 0, 0);
      background-size: 56px 56px;
    }

    .marker-public {
      background-image: url(marker-public.svg);
    }

    .marker-private {
      background-image: url(marker-private.svg);
    }

    .clearfix {
      display: block;
    }

    .clearfix:after {
      content: '.';
      display: block;
      height: 0;
      clear: both;
      visibility: hidden;
    }

    /* Marker tweaks */
    .mapboxgl-popup {
      padding-bottom: 50px;
    }

    .mapboxgl-popup-close-button {
      display: none;
    }

    .mapboxgl-popup-content {
      font: 400 15px/22px 'Source Sans Pro', 'Helvetica Neue', Sans-serif;
      padding: 0;
      width: 275px;
    }

    .mapboxgl-popup-content-wrapper {
      padding: 1%;
    }

    .mapboxgl-popup-content h3 {
      background: #A9D6EA;
      color: #1c3e57;
      margin: 0;
      display: block;
      padding: 10px;
      border-radius: 3px 3px 0 0;
      font-weight: 700;
      margin-top: -15px;
    }

    .mapboxgl-popup-content h4 {
      margin: 0;
      display: block;
      padding: 10px 10px 10px 10px;
      font-weight: 400;
    }

    .mapboxgl-popup-content div {
      padding: 10px;
    }

    .mapboxgl-popup-content p {
      padding: 2px 2px 10px 10px;
      margin: 0;
    }

    .mapboxgl-container .leaflet-marker-icon {
      cursor: pointer;
    }

    .mapboxgl-popup-anchor-top>.mapboxgl-popup-content {
      margin-top: 15px;
    }

    .mapboxgl-popup-anchor-top>.mapboxgl-popup-tip {
      border-bottom-color: #A9D6EA;
      ;
    }

    .mapboxgl-ctrl-geocoder {
      border: 0;
      border-radius: 0;
      position: relative;
      top: 0;
      width: 800px;
      margin-top: 0;
    }

    .mapboxgl-ctrl-geocoder>div {
      min-width: 100%;
      margin-left: 0;
    }

    .mapboxgl-ctrl-top-left .mapboxgl-ctrl-geocoder {
      clear: none;
    }

    button.mapboxgl-ctrl-geolocate {
      width: 35px;
      height: 35px;
    }

    #filters {
      padding: 10px;
    }

    [type="checkbox"],
    [type="radio"] {
      box-sizing: border-box;
      padding: 0;
    }

    .switch-field {
      padding: 5px 0;
      overflow: hidden;
    }

    .switch-title {
      margin-bottom: 6px;
    }

    .switch-field input {
      position: absolute !important;
      clip: rect(0, 0, 0, 0);
      border: 0;
      display: inline;
      overflow: hidden;
    }

    .switch-field label {
      display: inline-block;
      width: auto;
      background-color: #4f66ee;
      color: #fff;
      font-size: 14px;
      font-weight: 500;
      text-align: center;
      text-shadow: none;
      padding: 6px 14px;
      margin-bottom: 0;
      border: 1px solid rgba(0, 0, 0, 0.2);
      -webkit-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.1);
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.1);
      -webkit-transition: all 0.1s ease-in-out;
      -moz-transition: all 0.1s ease-in-out;
      -ms-transition: all 0.1s ease-in-out;
      -o-transition: all 0.1s ease-in-out;
      transition: all 0.1s ease-in-out;
    }

    .switch-field input:checked+label {
      background-color: #0c1464;
      -webkit-box-shadow: none;
      box-shadow: none;
    }

    .switch-field label:first-of-type {
      border-radius: 4px 0 0 4px;
    }

    .switch-field label:last-of-type {
      border-radius: 0 4px 4px 0;
    }

    .sfgov-cta-button__container a {
      background: #4f66ee;
      border-radius: 8px;
      color: #fff;
      font-size: 17px;
      font-weight: 500;
      padding: 13px 20px 11px;
      text-align: center;
      text-decoration: none;
      -moz-osx-font-smoothing: grayscale;
      margin: 0.5em 0.5em 0.5em 0;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      cursor: pointer;
      display: inline-block;
      width: auto;
      line-height: 17px;
    }

    .sfgov-cta-button__container a:hover {
      background: #0c1464;
    }

    .sfgov-cta-button__container div.field {
      padding: 0;
    }

    /* Extra small devices (phones, 600px and down) */
    @media only screen and (max-width: 600px) {
      .map {
        top: 60%;
        left: 0;
        width: 100%;
        bottom: 0;
        right: 0;
      }

      .sidebar {
        height: 60%;
        width: 100%;
      }

      .mapboxgl-ctrl-geocoder {
        width: 75px;
      }

      .mapboxgl-popup {
        display: none;
      }

      #listings-container {
        overflow: auto;
        height: calc(100% - 96px)
      }

      .listings {
        height: auto;
      }

    }

    /* Small devices (portrait tablets and large phones, 600px and up) */
    @media only screen and (min-width: 600px) {}

    /* Medium devices (landscape tablets, 768px and up) */
    @media only screen and (min-width: 768px) {}

    /* Large devices (laptops/desktops, 992px and up) */
    @media only screen and (min-width: 992px) {}

    /* Extra large devices (large laptops and desktops, 1200px and up) */
    @media only screen and (min-width: 1200px) {}
  </style>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NLN95H2" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <div class='sidebar'>
    <div class='heading'>
      <h1>COVID-19 Testing Locations</h1>
      <div>Read more <a href="https://sf.gov/GetTestedSF">about getting tested in San Francisco</a></div>
    </div>
    <div id='listings-container'>
      <div id='filters' class='filters'>
        <div class="switch-field">
          <div class="switch-title"><strong>Filter Locations</strong></div>
          <div class="switch-input" data-children-count="2">
            <input id="filter-all-sites" type="radio" name="maptoggle" value="all" checked="checked"><label
              id="label-all-sites" for="filter-all-sites">All Sites</label><input id="filter-public-sites" type="radio"
              name="maptoggle" value="public"><label id="label-public-sites" for="filter-public-sites">No Insurance
              Required</label>
          </div>
        </div>
        <div class="switch-field">
          <div class="switch-title"><strong>Sort Locations</strong></div>
          <div class="switch-input" data-children-count="2">
            <input id="sort-alpha" type="radio" name="sites" value="alpha" checked="checked"><label id="label-alpha"
              for="sort-alpha">Alphabetically</label><input id="sort-closest" type="radio" name="sites"
              value="closest"><label id="label-closest" for="sort-closest">Closest to Me</label>
          </div>
        </div>
      </div>
      <div id='listings' class='listings'></div>
    </div>
  </div>
  <div id='map' class='map'></div>
  <script>
    // This will let you use the .remove() function later on
    if (!('remove' in Element.prototype)) {
      Element.prototype.remove = function () {
        if (this.parentNode) {
          this.parentNode.removeChild(this);
        }
      };
    }

    mapboxgl.accessToken = 'pk.eyJ1IjoiZGF0YXNmIiwiYSI6ImNrOXB4aGpxczBib2szam1vdTdvZ2tlZTIifQ.Jo2x1aJbnvoOqb5z0f5A4Q';
    /** 
     * Add the map to the page
    */
    var map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/light-v10',
      center: [-122.431297, 37.773972],
      zoom: 12
    });

    var geolocate = new mapboxgl.GeolocateControl({
      positionOptions: {
        enableHighAccuracy: true
      },
      trackUserLocation: false
    });

    map.addControl(geolocate, 'top-left');

    var dataUrl = "https://data.sfgov.org/resource/dtit-7gp4.geojson"
    let locations;

    fetch(dataUrl)
    .then(function(response) {
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      return response.json();
    })
    .then(function(data) {
      locations = data
      return;
    });
    console.log(locations);

    var filterState = ['Public', 'Private']

    /**
     * Assign a unique id to each location. You'll use this `id`
     * later to associate each point on the map with a listing
     * in the sidebar.
    //location id added in source data
    locations.features.forEach(function (location, i) {
      location.properties.id = i;
    });
    */

    /**
     * Wait until the map loads to make changes to the map.
    */
    map.on('load', function (e) {
      /**
      add geocoder
      **/
      var geocoder = new MapboxGeocoder({
        accessToken: mapboxgl.accessToken, // Set the access token
        mapboxgl: mapboxgl, // Set the mapbox-gl instance
        marker: true, // Use the geocoder's default marker style
        bbox: [-122.6001, 37.6403, -122.2818, 37.8481] // Set the bounding box coordinates
      });

      map.addControl(geocoder, 'top-left');
      /** 
       * This is where your '.addLayer()' used to be, instead
       * add only the source without styling a layer
      */
      map.addSource("places", {
        "type": "geojson",
        "data": dataUrl
      });

      geolocate.on('geolocate', function (ev) {
        var geom = {
          geometry: {
            coordinates: [ev.coords.longitude, ev.coords.latitude],
            type: "Point"
          }
        };

        reSortList(geom, filterState);
      })

      /**
         * Listen for when a geocoder result is returned. When one is returned:
         * - Calculate distances
         * - Sort locations by distance
         * - Rebuild the listings
         * - Adjust the map camera
         * - Open a popup for the closest location
         * - Highlight the listing for the closest location.
        */
      geocoder.on('result', function (ev) {
        reSortList(ev.result, filterState);
      });

      function reBuildListings(locations) {
        /**
         * Rebuild the listings:
         * Remove the existing listings and build the location
         * list again using the newly sorted locations.
        */
        var listings = document.getElementById('listings');
        while (listings.firstChild) {
          listings.removeChild(listings.firstChild);
        }
        buildLocationList(locations, filterState);
      }

      function reSortList(geom, filter) {
        /**
         * Calculate distances:
         * For each location, use turf.disance to calculate the distance
         * in miles between the searchResult and the location. Assign the
         * calculated value to a property called `distance`.
        */
        var filter = filter ? filter : ['Private', 'Public']
        var options = { units: 'miles' };
        locations.features.forEach(function (location) {
          if (filter.includes(location.properties["location_type"])) {
            Object.defineProperty(location.properties, 'distance', {
              value: turf.distance(geom, location.geometry, options),
              writable: true,
              enumerable: true,
              configurable: true
            });
          } else {
            Object.defineProperty(location.properties, 'distance', {
              value: 1000,
              writable: true,
              enumerable: true,
              configurable: true
            })
          }
        });

        /**
         * Sort locations by distance from closest to the `searchResult`
         * to furthest.
        */
        locations.features.sort(function (a, b) {
          if (a.properties.distance > b.properties.distance) {
            return 1;
          }
          if (a.properties.distance < b.properties.distance) {
            return -1;
          }
          return 0; // a must be equal to b
        });

        reBuildListings(locations);

        /* Open a popup for the closest location. */
        createPopUp(locations.features[0]);

        /** Highlight the listing for the closest location. */
        var activeListing = document.getElementById('listing-' + locations.features[0].properties.id);
        activeListing.classList.add('active');

        /**
         * Adjust the map camera:
         * Get a bbox that contains both the geocoder result and
         * the closest location. Fit the bounds to that bbox.
        */
        var bbox = getBbox(locations, 0, geom);
        map.fitBounds(bbox, {
          padding: 100
        });
      };

      function sortAlpha(locations) {
        locations.features.sort(function (a, b) {
          if (a.properties.name < b.properties.name) { return -1; }
          if (a.properties.name > b.properties.name) { return 1; }
          return 0;
        })
        reBuildListings(locations);
      };

      /**
      * Using the coordinates (lng, lat) for
      * (1) the search result and
      * (2) the closest location
      * construct a bbox that will contain both points
      */
      function getBbox(sortedlocations, locationIdentifier, geom) {
        var lats = [sortedlocations.features[locationIdentifier].geometry.coordinates[1], geom.geometry.coordinates[1]]
        var lons = [sortedlocations.features[locationIdentifier].geometry.coordinates[0], geom.geometry.coordinates[0]]
        var sortedLons = lons.sort(function (a, b) {
          if (a > b) { return 1; }
          if (a.distance < b.distance) { return -1; }
          return 0;
        });
        var sortedLats = lats.sort(function (a, b) {
          if (a > b) { return 1; }
          if (a.distance < b.distance) { return -1; }
          return 0;
        });
        return [
          [sortedLons[0], sortedLats[0]],
          [sortedLons[1], sortedLats[1]]
        ];
      }
      /**
       * Add all the things to the page:
       * - The location listings on the side of the page
       * - The markers onto the map
      */
      var noInsurance = document.getElementById('label-public-sites');
      noInsurance.addEventListener('click', function (e) {
        filterState = ['Public'];
        let markers = document.getElementsByClassName("marker-private");
        for (let i = 0; i < markers.length; i++) {
          markers[i].style.visibility = "hidden";
        }
        let listings = document.getElementsByClassName("listing-item__private");
        for (let i = 0; i < listings.length; i++) {
          listings[i].style.display = "none";
        }
      });
      var allSites = document.getElementById('label-all-sites');
      allSites.addEventListener('click', function (e) {
        filterState = ['Public', 'Private'];
        let markers = document.getElementsByClassName("marker");
        for (let i = 0; i < markers.length; i++) {
          markers[i].style.visibility = "visible";
        }
        let listings = document.getElementsByClassName("listing-item");
        for (let i = 0; i < listings.length; i++) {
          listings[i].style.display = "block";
        }
      });
      var alpha = document.getElementById('label-alpha')
      alpha.addEventListener('click', function (e) {
        return sortAlpha(locations);
      });
      var closest = document.getElementById('label-closest')
      closest.addEventListener('click', function (e) {
        return geolocate.trigger();
      });
      sortAlpha(locations);
      //buildLocationList(locations);
      addMarkers();
    })

    /**
     * Add a marker to the map for every location listing.
    **/
    function addMarkers() {
      /* For each feature in the GeoJSON object above: */
      locations.features.forEach(function (marker) {
        /* Create a div element for the marker. */
        var el = document.createElement('div');
        /* Assign a unique `id` to the marker. */
        el.id = "marker-" + marker.properties.id;
        /* Assign the `marker` class to each marker for styling. */
        el.className = 'marker';
        if (marker.properties.location_type == "Public") {
          el.className += ' marker-public'
        } else {
          el.className += ' marker-private'
        }

        /**
         * Create a marker using the div element
         * defined above and add it to the map.
        **/
        new mapboxgl.Marker(el, { offset: [0, -23] })
          .setLngLat(marker.geometry.coordinates)
          .addTo(map);

        /**
         * Listen to the element and when it is clicked, do three things:
         * 1. Fly to the point
         * 2. Close all other popups and display popup for clicked location
         * 3. Highlight listing in sidebar (and remove highlight for all other listings)
        **/
        el.addEventListener('click', function (e) {
          /* Fly to the point */
          flyTolocation(marker);
          /* Close all other popups and display popup for clicked location */
          createPopUp(marker);
          /* Highlight listing in sidebar */
          var activeItem = document.getElementsByClassName('active');
          e.stopPropagation();
          if (activeItem[0]) {
            activeItem[0].classList.remove('active');
          }
          var listing = document.getElementById('listing-' + marker.properties.id);
          listing.classList.add('active');
          listing.scrollIntoView();
        });
      });
    }

    /**
     * Add a listing for each location to the sidebar.
    **/
    function buildLocationList(data, filter) {
      var filter = filter ? filter : ['Public', 'Private']
      let locations = data.features.filter(function (location) {
        return filter.includes(location.properties["location_type"])
      });
      locations.forEach(function (location, i) {
        /**
         * Create a shortcut for `location.properties`,
         * which will be used several times below.
        **/
        var prop = location.properties;

        /* Add a new listing section to the sidebar. */
        var listings = document.getElementById('listings');
        var listing = listings.appendChild(document.createElement('div'));
        /* Assign a unique `id` to the listing. */
        listing.id = "listing-" + prop.id;
        /* Assign the `item` class to each listing for styling. */
        listing.className = 'listing-item ';
        listing.className += location.properties.location_type == 'Public' ? 'listing-item__public' : 'listing-item__private'

        /* Add the link to the individual listing created above. */
        var link = listing.appendChild(document.createElement('a'));
        link.href = '#';
        link.className = 'title';
        link.id = "link-" + prop.id;
        link.innerHTML = prop.name;

        if (prop.distance) {
          var roundedDistance = Math.round(prop.distance * 100) / 100;
          listing.prepend(roundedDistance + ' miles away')
        }

        /* Add details to the individual listing. */
        var details = listing.appendChild(document.createElement('div'));
        details.innerHTML = prop.address + "<br/>San Francisco, CA";
        /*if (prop.phone_number_formatted) {
          details.innerHTML += '<br/>' + prop.phone_number_formatted;
        }*/
        if (prop.website) {
          details.innerHTML += '<br/><a href="' + prop.website + '\">' + prop.website + '</a>'
        }
        if (prop.eligibility) {
          details.innerHTML += '<p><strong>Eligibility:</strong> ' + prop.eligibility + '</p>';
        }
        if (prop.testing_hours) {
          details.innerHTML += '<p><strong>Hours:</strong> ' + prop.testing_hours + '</p>';
        }
        if (prop.cta_link) {
          details.innerHTML += '<div class="sfgov-cta-button__container"><div class="field field--type-link __link field__item"><a class="cta-link" href="' + prop.cta_link + '">' + prop.cta_text + '</a></div></div>';
        } else {
          details.innerHTML += '<p><strong>' + prop.cta_text + '</strong></p>';
        }
        if (prop.cta_link && prop.cta_link.includes('tel')) {
          details.innerHTML += '<p><strong>Phone:</strong> ' + prop.phone_number_formatted + '</p>';
        }
        if (prop.medical_home) {
          details.innerHTML += 'Testing provided by ' + prop.medical_home + '</p>';
        }

        /**
         * Listen to the element and when it is clicked, do four things:
         * 1. Update the `currentFeature` to the location associated with the clicked link
         * 2. Fly to the point
         * 3. Close all other popups and display popup for clicked location
         * 4. Highlight listing in sidebar (and remove highlight for all other listings)
        **/
        link.addEventListener('click', function (e) {
          for (var i = 0; i < data.features.length; i++) {
            if (this.id === "link-" + data.features[i].properties.id) {
              var clickedListing = data.features[i];
              flyTolocation(clickedListing);
              createPopUp(clickedListing);
            }
          }
          var activeItem = document.getElementsByClassName('active');
          if (activeItem[0]) {
            activeItem[0].classList.remove('active');
          }
          this.parentNode.classList.add('active');
        });
      });
    }

    /**
     * Use Mapbox GL JS's `flyTo` to move the camera smoothly
     * a given center point.
    **/
    function flyTolocation(currentFeature) {
      map.flyTo({
        center: currentFeature.geometry.coordinates,
        zoom: 15
      });
    }

    /**
     * Create a Mapbox GL JS `Popup`.
    **/
    function createPopUp(currentFeature) {
      var popUps = document.getElementsByClassName('mapboxgl-popup');
      if (popUps[0]) popUps[0].remove();
      var cta = currentFeature.properties.cta_link ? '<div class="sfgov-cta-button__container"><div class="field field--type-link __link field__item"><a class="cta-link" href="' + currentFeature.properties.cta_link + '">' + currentFeature.properties.cta_text + '</a></div></div>' : '<div><strong>' + currentFeature.properties.cta_text + '</strong></div>'
      var phone = (currentFeature.properties.cta_link && currentFeature.properties.cta_link.includes('tel')) ?
        '<p><strong>Phone:</strong> ' + currentFeature.properties.phone_number_formatted + '</p>' : '';
      var popup = new mapboxgl.Popup({ closeOnClick: false })
        .setLngLat(currentFeature.geometry.coordinates)
        .setHTML('<h3>' + currentFeature.properties.name + '</h3>' +
          '<h4>' + currentFeature.properties.address + '</h4>' +
          '<p><strong>Eligibility:</strong> ' + currentFeature.properties.eligibility + '</p>' +
          '<p><strong>Hours:</strong> ' + currentFeature.properties.testing_hours + '</p>' +
          cta + phone)
        .addTo(map);
    }
  </script>
</body>

</html>